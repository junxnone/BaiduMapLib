!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MapGeo=e()}(this,function(){"use strict";var a=0;function l(t,e){var r=e.onclick,n=e.ondblclick,o=e.dbldel,a=e.confirmdel;r&&"function"==typeof r&&t.addEventListener("click",function(t){r.call(this,t)}),o&&(n=function(t){if(a&&confirm("确认删除？"))return this.map.removeOverlay(this),!1;a||this.map.removeOverlay(this)}),n&&"function"==typeof n&&t.addEventListener("dblclick",function(t){n.call(this,t)})}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},e=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.forEach(function(t){var e,r,n;e=o,n=a[r=t],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return o}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,r){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&i(o,r.prototype),o}).apply(null,arguments)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}BMap.Layer=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.id=a++,this.overlays=[];var r=e.name,n=e.alias,o=e.show;this.name=r||"Layer".concat(this.id),this.show=o||!0,n&&(this.alias=n),(this.map=t).layers[r]=this},BMap.Layer.prototype.add=function(t){this.overlays.push(t)},BMap.Layer.prototype.hide=function(t){this.overlays.forEach(function(t){return t.hide()})},BMap.Layer.prototype.show=function(t){this.overlays.forEach(function(t){return t.show()})},BMap.Layer.prototype.remove=function(t){},BMap.Layer.prototype.clear=function(){var e=this.map;this.overlays.forEach(function(t){e.removeOverlay(t)}),this.overlays=[]},BMap.Overlay.prototype.enableDoubleClickDel=function(){l(this,{dblclick:!0})},BMap.Overlay.prototype.addToLayer=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:DEFAULT_FEATURE_NAME,alias:""},e=t.name,r=(t.alias,this.map.layers[e]);return r||(r=new BMap.Layer(this.map,t)),(this.layer=r).add(this),this},BMap.Overlay.prototype.toGeoJSON=function(){var e={type:"",coordinates:[]},t={type:"Feature",properties:{},geometry:e};if(this instanceof BMap.Polygon&&(e.type="Polygon",e.coordinates=[[]],this.getPath().forEach(function(t){e.coordinates[0].push([t.lng,t.lat])})),this instanceof BMap.Polyline&&(e.type="LineString",this.getPath().forEach(function(t){e.coordinates.push([t.lng,t.lat])})),this instanceof BMap.Marker){e.type="Point";var r=this.getPosition(),n=r.lng,o=r.lat;e.coordinates=[n,o]}return t},BMap.RenderMapV=function(t,e,r){this.type="mapv",this.map=t,this.dataSet=new mapv.DataSet(e);var n=r,o=n.name,a=(n.prop,n.renderOption),i=n.styleMap;r=Object.assign({},BMap.RenderMapV.DEFAULT_OPTION,a,i),this.layer=new mapv.baiduMapLayer(t,this.dataSet,r);var p=this.layer.canvasLayer;p.map=t,p.addToLayer(o),(p.layer.render=this).overlays=[p],o&&p.canvas.classList.add(o)},BMap.RenderMapV.prototype.update=function(t){this.dataSet.set(t)},BMap.RenderMapV.DEFAULT_OPTION={strokeStyle:"green",fillStyle:"rgba(255,255,255,0.5)",shadowBlur:0,methods:{click:null},lineWidth:3,draw:"simple"};BMap.Point;var f={name:"tmp",prop:{},styleMap:{},renderer:"svg"};BMap.Point.fromArray=function(t){return c(BMap.Point,u(t))},BMap.Map.prototype.setCenter2=function(t,e){var r;r=Array.isArray(t)?c(BMap.Point,u(t)):t,e||(e=this.getZoom()),this.setCenter(r,e)},BMap.Map.prototype.addPoint=function(t){var e=c(BMap.Point,u(t)),r=new BMap.Marker(e);this.addOverlay(r);var n=this;return r.addEventListener("dblclick",function(t){n.removeOverlay(this)}),r},BMap.Map.prototype.addTmpPoint=function(t){var e=c(BMap.Point,u(t));return this.tmpMk?this.tmpMk.setPosition(e):this.tmpMk=this.addPoint(t),this.tmpMk},BMap.Map.prototype.layers={};var p={strokeColor:"red",strokeWeight:4,strokeOpacity:.5},d={strokeColor:"blue",fillColor:"blue",strokeWeight:2,fillOpacity:.8},h={};BMap.Map.prototype.polygon=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,r=t[0].map(function(t){return c(BMap.Point,u(t))}),n=e.styleMap;e.styleMap.polygon&&(n=e.styleMap.polygon);var o=y({},d,n),a=new BMap.Polygon(r,o);this.addOverlay(a);e.name;var i=e.prop;return a.prop=i,a.addToLayer(e),l(a,e),a},BMap.Map.prototype.polyline=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,r=t.map(function(t){return c(BMap.Point,u(t))}),n=e.styleMap;e.styleMap.polyline&&(n=e.styleMap.polyline);var o=y({},p,n),a=new BMap.Polyline(r,o);this.addOverlay(a);e.name;var i=e.prop;return a.prop=i,a.addToLayer(e),l(a,e),a},BMap.Map.prototype.point=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,r=c(BMap.Point,u(t)),n=e.styleMap;e.styleMap.point&&(n=e.styleMap.point);var o=y({},h,n),a=new BMap.Marker(r,o);this.addOverlay(a);e.name,e.alias;var i=e.prop;return a.prop=i,a.addToLayer(e),l(a,e),a},BMap.Map.prototype.circle=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,r=c(BMap.Point,u(t)),n=e.styleMap;e.styleMap.circle&&(n=e.styleMap.circle);var o=y({},d,n),a=(e.name,e.prop),i=e.radius,p=new BMap.Circle(r,i,o);return this.addOverlay(p),p.prop=a,p.addToLayer(e),l(p,e),p},BMap.Map.prototype.addFeature=function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,n=t.geometry,o=n.type,a=(r.name,n.coordinates);return"Polygon"===o&&(e=this.polygon(a,r)),"LineString"===o&&(e=this.polyline(a,r)),"Point"===o&&(e=this.point(a,r)),e},BMap.Map.prototype.geoJSON=function(t){var e=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;try{var n=r.name;if("mapv"===r.render){var o,a=this.layers[n];return a?(o=a.render).update(t):o=new BMap.RenderMapV(this,t,r),o.overlays}var i,p="object"!==s(t)?JSON.parse(t):t;return"FeatureCollection"===p.type&&(i=[],p.features.forEach(function(t){i.push(e.addFeature(t,r))})),Array.isArray(p)&&(i=[],p.forEach(function(t){i.push(e.addFeature(t,r))})),"Feature"===p.type&&(i=this.addFeature(p,r)),"Polygon"===p.type&&(i=this.polygon(p.coordinates,r)),"LineString"===p.type&&(i=this.polyline(p.coordinates,r)),"Point"===p.type&&(i=this.point(p.coordinates,r)),i}catch(t){return console.log(t),null}},BMap.Map.prototype.getMbr=function(){var t=this.getBounds(),e=t.getSouthWest(),r=e.lng,n=e.lat,o=t.getNorthEast();return{xmin:r,xmax:o.lng,ymin:n,ymax:o.lat}};return{}});